<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Ç—Ä–∏—Å</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #202028;
            color: #fff;
            font-family: 'Arial', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
            color: #FFD700;
        }

        #game-board {
            border: 2px solid #444;
            border-radius: 5px;
            background: #111;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }

        .info-panel {
            background: #1a1a24;
            padding: 20px;
            border-radius: 10px;
            width: 250px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
        }

        .info-item {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #333;
        }

        .info-title {
            font-weight: bold;
            color: #4fc3f7;
            margin-bottom: 5px;
        }

        .info-value {
            font-size: 1.2em;
            color: #fff;
        }

        .controls {
            margin-top: 20px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .controls-row {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        button {
            background: linear-gradient(45deg, #FF8E53, #FE6B8B);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            min-width: 60px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .keyboard-info {
            margin-top: 20px;
            background: #1a1a24;
            padding: 15px;
            border-radius: 10px;
            width: 100%;
            max-width: 400px;
        }

        .keyboard-info h2 {
            color: #4fc3f7;
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.2em;
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                align-items: center;
            }

            .info-panel {
                width: 100%;
                max-width: 400px;
            }
        }
    </style>
</head>
<body>
    <h1>–¢–µ—Ç—Ä–∏—Å</h1>

    <div class="container">
        <div class="info-panel">
            <div class="info-item">
                <div class="info-title">–°—á–µ—Ç</div>
                <div id="score" class="info-value">0</div>
            </div>

            <div class="info-item">
                <div class="info-title">–£—Ä–æ–≤–µ–Ω—å</div>
                <div id="level" class="info-value">1</div>
            </div>

            <div class="info-item">
                <div class="info-title">–õ–∏–Ω–∏–π</div>
                <div id="lines" class="info-value">0</div>
            </div>

            <div class="info-item">
                <div class="info-title">–°—Ç–∞—Ç—É—Å</div>
                <div id="status" class="info-value">üü¢ –ò–≥—Ä–∞–µ–º</div>
            </div>

            <div class="controls">
                <button id="left-btn">‚Üê</button>
                <button id="rotate-btn">‚Üª</button>
                <button id="right-btn">‚Üí</button>
                <button id="down-btn">‚Üì</button>
                <button id="drop-btn">‚èèÔ∏è</button>
                <button id="pause-btn">‚èØ</button>
                <button id="new-btn">üîÑ</button>
                <button id="quit-btn">‚ùå</button>
            </div>
        </div>

        <canvas id="game-board" width="300" height="300"></canvas>
    </div>

    <div class="keyboard-info">
        <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h2>
        <div class="controls-row">
            <button>‚Üê</button>
            <button>‚Üí</button>
            <button>‚Üì</button>
            <button>‚Üë</button>
            <button>–ü—Ä–æ–±–µ–ª</button>
        </div>
    </div>

    <script>
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã
        const COLS = 10;
        const ROWS = 10; // –£–º–µ–Ω—å—à–µ–Ω–æ —Å 20 –¥–æ 10
        const BLOCK_SIZE = 30;
        const COLORS = [
            '#000000', // –ü—É—Å—Ç–æ
            '#FF0D72', // I
            '#0DC2FF', // J
            '#0DFF72', // L
            '#F538FF', // O
            '#FF8E0D', // S
            '#FFE138', // T
            '#3877FF'  // Z
        ];

        // –§–∏–≥—É—Ä—ã —Ç–µ—Ç—Ä–∏—Å–∞
        const SHAPES = [
            [[1, 1, 1, 1]], // I
            [[1, 0, 0], [1, 1, 1]], // J
            [[0, 0, 1], [1, 1, 1]], // L
            [[1, 1], [1, 1]], // O
            [[0, 1, 1], [1, 1, 0]], // S
            [[0, 1, 0], [1, 1, 1]], // T
            [[1, 1, 0], [0, 1, 1]]  // Z
        ];

        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const canvas = document.getElementById('game-board');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');
        const levelElement = document.getElementById('level');
        const linesElement = document.getElementById('lines');
        const statusElement = document.getElementById('status');

        // –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        const leftBtn = document.getElementById('left-btn');
        const rightBtn = document.getElementById('right-btn');
        const downBtn = document.getElementById('down-btn');
        const rotateBtn = document.getElementById('rotate-btn');
        const dropBtn = document.getElementById('drop-btn');
        const pauseBtn = document.getElementById('pause-btn');
        const newBtn = document.getElementById('new-btn');
        const quitBtn = document.getElementById('quit-btn');

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        let board = [];
        let currentPiece;
        let currentX;
        let currentY;
        let score = 0;
        let level = 1;
        let lines = 0;
        let gameOver = false;
        let paused = false;
        let dropInterval = 800; // ms
        let dropStart = Date.now();

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
        function initBoard() {
            board = Array.from({ length: ROWS }, () => Array(COLS).fill(0));
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Ñ–∏–≥—É—Ä—ã
        function newPiece() {
            const pieceId = Math.floor(Math.random() * SHAPES.length);
            currentPiece = SHAPES[pieceId];
            currentX = Math.floor((COLS - currentPiece[0].length) / 2);
            currentY = 0;

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–æ–Ω–µ—Ü –∏–≥—Ä—ã
            if (checkCollision()) {
                gameOver = true;
                statusElement.textContent = "üî¥ –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞";
            }
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π
        function checkCollision(offsetX = 0, offsetY = 0) {
            for (let y = 0; y < currentPiece.length; y++) {
                for (let x = 0; x < currentPiece[y].length; x++) {
                    if (currentPiece[y][x]) {
                        const newX = currentX + x + offsetX;
                        const newY = currentY + y + offsetY;

                        if (
                            newX < 0 || 
                            newX >= COLS || 
                            newY >= ROWS || 
                            (newY >= 0 && board[newY][newX])
                        ) {
                            return true;
                        }
                    }
                }
            }
            return false;
        }

        // –§–∏–∫—Å–∞—Ü–∏—è —Ñ–∏–≥—É—Ä—ã –Ω–∞ –ø–æ–ª–µ
        function lockPiece() {
            for (let y = 0; y < currentPiece.length; y++) {
                for (let x = 0; x < currentPiece[y].length; x++) {
                    if (currentPiece[y][x]) {
                        board[currentY + y][currentX + x] = currentPiece[y][x];
                    }
                }
            }
        }

        // –û—á–∏—Å—Ç–∫–∞ –ª–∏–Ω–∏–π
        function clearLines() {
            let linesCleared = 0;

            for (let y = ROWS - 1; y >= 0; y--) {
                if (board[y].every(value => value !== 0)) {
                    // –£–¥–∞–ª–∏—Ç—å –ª–∏–Ω–∏—é
                    for (let row = y; row > 0; row--) {
                        board[row] = [...board[row - 1]];
                    }
                    board[0] = Array(COLS).fill(0);

                    linesCleared++;
                    y++; // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —ç—Ç—É –∂–µ –ø–æ–∑–∏—Ü–∏—é —Å–Ω–æ–≤–∞
                }
            }

            if (linesCleared > 0) {
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç–∞
                lines += linesCleared;
                score += [100, 300, 500, 800][Math.min(linesCleared - 1, 3)] * level;
                level = Math.floor(lines / 5) + 1; // –ò–∑–º–µ–Ω–µ–Ω–æ —Å 10 –Ω–∞ 5 –¥–ª—è –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–æ—Å—Ç–∞ —É—Ä–æ–≤–Ω—è

                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏
                dropInterval = Math.max(100, 800 - (level - 1) * 70);

                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
                updateUI();
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
        function updateUI() {
            scoreElement.textContent = score;
            levelElement.textContent = level;
            linesElement.textContent = lines;
        }

        // –î–≤–∏–∂–µ–Ω–∏–µ —Ñ–∏–≥—É—Ä—ã –≤–Ω–∏–∑
        function drop() {
            if (checkCollision(0, 1)) {
                lockPiece();
                clearLines();
                newPiece();
            } else {
                currentY++;
            }
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
        function drawBoard() {
            // –û—á–∏—Å—Ç–∫–∞ –∫–∞–Ω–≤–∞—Å–∞
            ctx.fillStyle = '#111';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å–µ—Ç–∫–∏
            ctx.strokeStyle = '#222';
            for (let x = 0; x <= COLS; x++) {
                ctx.beginPath();
                ctx.moveTo(x * BLOCK_SIZE, 0);
                ctx.lineTo(x * BLOCK_SIZE, ROWS * BLOCK_SIZE);
                ctx.stroke();
            }

            for (let y = 0; y <= ROWS; y++) {
                ctx.beginPath();
                ctx.moveTo(0, y * BLOCK_SIZE);
                ctx.lineTo(COLS * BLOCK_SIZE, y * BLOCK_SIZE);
                ctx.stroke();
            }

            // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ñ–∏–≥—É—Ä –Ω–∞ –ø–æ–ª–µ
            for (let y = 0; y < ROWS; y++) {
                for (let x = 0; x < COLS; x++) {
                    if (board[y][x]) {
                        drawBlock(x, y, board[y][x]);
                    }
                }
            }

            // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ç–µ–∫—É—â–µ–π —Ñ–∏–≥—É—Ä—ã
            if (currentPiece) {
                for (let y = 0; y < currentPiece.length; y++) {
                    for (let x = 0; x < currentPiece[y].length; x++) {
                        if (currentPiece[y][x]) {
                            drawBlock(currentX + x, currentY + y, currentPiece[y][x]);
                        }
                    }
                }
            }
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –±–ª–æ–∫–∞
        function drawBlock(x, y, colorId) {
            ctx.fillStyle = COLORS[colorId];
            ctx.fillRect(x * BLOCK_SIZE, y * BLOCK_SIZE, BLOCK_SIZE, BLOCK_SIZE);

            // –ì—Ä–∞–¥–∏–µ–Ω—Ç –¥–ª—è –æ–±—ä–µ–º–∞
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 2;
            ctx.strokeRect(x * BLOCK_SIZE, y * BLOCK_SIZE, BLOCK_SIZE, BLOCK_SIZE);

            // –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–≤–µ—á–µ–Ω–∏–µ
            ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
            ctx.fillRect(x * BLOCK_SIZE, y * BLOCK_SIZE, BLOCK_SIZE - 1, 5);
            ctx.fillRect(x * BLOCK_SIZE, y * BLOCK_SIZE, 5, BLOCK_SIZE - 1);
        }

        // –û—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
        function gameLoop() {
            if (gameOver || paused) return;

            const now = Date.now();
            const delta = now - dropStart;

            if (delta > dropInterval) {
                drop();
                dropStart = now;
            }

            drawBoard();
            requestAnimationFrame(gameLoop);
        }

        // –ü–æ–≤–æ—Ä–æ—Ç —Ñ–∏–≥—É—Ä—ã
        function rotate() {
            const rotated = currentPiece[0].map((_, i) => 
                currentPiece.map(row => row[i]).reverse()
            );

            const original = currentPiece;
            currentPiece = rotated;

            if (checkCollision()) {
                currentPiece = original;
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫
        leftBtn.addEventListener('click', () => {
            if (!gameOver && !paused && !checkCollision(-1, 0)) currentX--;
        });

        rightBtn.addEventListener('click', () => {
            if (!gameOver && !paused && !checkCollision(1, 0)) currentX++;
        });

        downBtn.addEventListener('click', () => {
            if (!gameOver && !paused && !checkCollision(0, 1)) currentY++;
        });

        rotateBtn.addEventListener('click', () => {
            if (!gameOver && !paused) rotate();
        });

        dropBtn.addEventListener('click', () => {
            if (!gameOver && !paused) {
                while (!checkCollision(0, 1)) currentY++;
                drop();
            }
        });

        pauseBtn.addEventListener('click', () => {
            if (gameOver) return;

            paused = !paused;
            statusElement.textContent = paused ? "‚è∏ –ü–∞—É–∑–∞" : "üü¢ –ò–≥—Ä–∞–µ–º";

            if (!paused) {
                dropStart = Date.now();
                gameLoop();
            }
        });

        newBtn.addEventListener('click', newGame);
        quitBtn.addEventListener('click', () => {
            window.close();
        });

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
        document.addEventListener('keydown', event => {
            if (gameOver || paused) return;

            switch (event.keyCode) {
                case 37: // –í–ª–µ–≤–æ
                    if (!checkCollision(-1, 0)) currentX--;
                    break;
                case 39: // –í–ø—Ä–∞–≤–æ
                    if (!checkCollision(1, 0)) currentX++;
                    break;
                case 40: // –í–Ω–∏–∑
                    if (!checkCollision(0, 1)) currentY++;
                    break;
                case 38: // –í–≤–µ—Ä—Ö (–ø–æ–≤–æ—Ä–æ—Ç)
                    rotate();
                    break;
                case 32: // –ü—Ä–æ–±–µ–ª (–º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–∞–¥–µ–Ω–∏–µ)
                    while (!checkCollision(0, 1)) currentY++;
                    break;
                case 80: // P - –ø–∞—É–∑–∞
                    paused = !paused;
                    statusElement.textContent = paused ? "‚è∏ –ü–∞—É–∑–∞" : "üü¢ –ò–≥—Ä–∞–µ–º";
                    if (!paused) {
                        dropStart = Date.now();
                        gameLoop();
                    }
                    break;
            }
        });

        // –ù–æ–≤–∞—è –∏–≥—Ä–∞
        function newGame() {
            initBoard();
            newPiece();
            score = 0;
            level = 1;
            lines = 0;
            gameOver = false;
            paused = false;
            dropInterval = 800;
            statusElement.textContent = "üü¢ –ò–≥—Ä–∞–µ–º";
            updateUI();
            dropStart = Date.now();
            gameLoop();
        }

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        newGame();
    </script>
</body>
</html>